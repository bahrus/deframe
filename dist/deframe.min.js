function init(e,t){if("complete"!==document.readyState)return void(document.onreadystatechange=function(){"complete"===document.readyState&&init(e,t)});const o=window.top;document.querySelectorAll('link[as="script"][rel="preloadmodule"]').forEach(e=>{const t=o.document.createElement("script");t.src=e.href,t.type="module",o.document.head.appendChild(t)});let n=null;if(t.bodyContainsTemplate&&(n=document.body.firstElementChild),window===o){const e=t.attachBehavior;return null!==e&&document.querySelectorAll(e.selector).forEach(t=>{e.attach(t,o)}),void(n&&(document.body.appendChild(n.content.cloneNode(!0)),n.remove()))}null===n&&((n=o.document.createElement("template")).innerHTML=document.body.innerHTML);o.customElements.define(e,class extends o.HTMLElement{constructor(){super(),t.useShadow&&(n.content.cloneNode(!0),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(n.content.cloneNode(!0)))}connectedCallback(){const e=t.attachBehavior;if(t.useShadow)e&&this.shadowRoot.querySelectorAll(e.selector).forEach(t=>{e.attach(t,o)});else{const t=n.content.cloneNode(!0);this.appendChild(t),e&&this.querySelectorAll(e.selector).forEach(t=>{e.attach(t,o)})}}}),window.parent.document.querySelectorAll("iframe").forEach(e=>{e.contentWindow===window&&e.remove()})}export function deframe(e,t={useShadow:!0,attachBehavior:null,bodyContainsTemplate:!1}){init(e,t)}