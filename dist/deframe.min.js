function test(e){try{e.customElements.get("test-ing")}catch(e){return!1}return!0}function getTop(e){return e.buckStopsHere?e:test(e.parent)?e===e.parent?e:getTop(e.parent):e}function init(e,t){if("complete"!==document.readyState)return void(document.onreadystatechange=function(){"complete"===document.readyState&&init(e,t)});const n=getTop(window);document.querySelectorAll('link[as="script"]').forEach(e=>{const t=n.document.createElement("script");t.src=e.href,Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)}),n.document.head.appendChild(t)});let o=null;if(t.bodyContainsTemplate&&(o=document.body.firstElementChild),window===n){const e=t.attachBehavior;return e&&document.querySelectorAll(e.selector).forEach(t=>{e.attach(t,n)}),void(o&&(document.body.appendChild(o.content.cloneNode(!0)),o.remove()))}if(null===o&&((o=n.document.createElement("template")).innerHTML=document.body.innerHTML),t.defineFn)t.defineFn(n,o,t);else{class c extends n.HTMLElement{constructor(){if(super(),t.useShadow){this.attachShadow({mode:"open"});const e=o.content.cloneNode(!0);this.shadowRoot.appendChild(e)}}connectedCallback(){const e=t.attachBehavior;if(t.useShadow)e&&this.shadowRoot.querySelectorAll(e.selector).forEach(t=>{e.attach(t,n)});else{const t=o.content.cloneNode(!0);this.appendChild(t),e&&this.querySelectorAll(e.selector).forEach(t=>{e.attach(t,n)})}}}n.customElements.define(e,c)}window.parent.document.querySelectorAll("iframe").forEach(e=>{e.contentWindow===window&&(e.style.display="none")})}export function deframe(e,t={useShadow:!0,attachBehavior:null,bodyContainsTemplate:!1,defineFn:null}){init(e,t)}